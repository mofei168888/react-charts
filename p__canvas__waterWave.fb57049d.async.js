(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[28],{JM2o:function(e,t,i){"use strict";i.r(t);i("giR+");var a=i("fyUT"),r=i("qIgq"),n=i.n(r),s=i("q1tI"),o=i.n(s),h=i("jehZ"),l=i.n(h);function p(e){var t=parseInt(getComputedStyle(e).height,10),i=parseInt(getComputedStyle(e).paddingTop,10)+parseInt(getComputedStyle(e).paddingBottom,10);return t-i}function d(e){if(!e)return 0;var t=e,i=p(t);while(!i){if(t=t.parentNode,!t)break;i=p(t)}return i}var c,v,m,u=()=>e=>{var t;return t=class extends s["Component"]{constructor(){super(...arguments),this.state={computedHeight:0},this.handleRoot=(e=>{this.root=e})}componentDidMount(){var e=this.props.height;if(!e){var t=d(this.root);this.setState({computedHeight:t})}}render(){var t=this.props.height,i=this.state.computedHeight,a=t||i;return o.a.createElement("div",{ref:this.handleRoot},a>0&&o.a.createElement(e,l()({},this.props,{height:a})))}},t},f=u,g=i("iXxa"),w=i.n(g),C=(c=f(),c((m=class extends s["PureComponent"]{constructor(){super(...arguments),this.state={radio:1},this.resize=(()=>{if(this.root){var e=this.props.height,t=this.root.parentNode.offsetWidth;this.setState({radio:t<e?t/e:1})}}),this.renderChart=(e=>{var t=this.props,i=t.percent,a=t.color,r=void 0===a?"#1890FF":a,n=i/100,s=this;if(cancelAnimationFrame(this.timer),this.node&&(0===n||n)){var o=this.node,h=o.getContext("2d"),l=o.width,p=o.height,d=l/2,c=2,v=d-c;h.beginPath(),h.lineWidth=2*c;for(var m=l-c,u=m/8,f=.2,g=f,w=c,C=0,E=0,T=.005,W=[],b=d-c,F=-Math.PI/2,I=!0,M=F;M<F+2*Math.PI;M+=1/(8*Math.PI))W.push([d+b*Math.cos(M),d+b*Math.sin(M)]);var S=W.shift();h.strokeStyle=r,h.moveTo(S[0],S[1]),y()}function x(){h.beginPath(),h.save();for(var e=[],t=w;t<w+m;t+=20/m){var i=C+(w+t)/u,a=Math.sin(i)*g,n=t,o=2*v*(1-E)+(d-v)-u*a;h.lineTo(n,o),e.push([n,o])}var l=e.shift();h.lineTo(w+m,p),h.lineTo(w,p),h.lineTo(l[0],l[1]);var c=h.createLinearGradient(0,0,0,p);c.addColorStop(0,"#FFF"),c.addColorStop(1,r),h.fillStyle=c,h.fill(),h.restore(),void 0===s.isFinish&&(s.isFinish=!0)}function y(){if(h.clearRect(0,0,l,p),I&&"update"!==e)if(W.length){var t=W.shift();h.lineTo(t[0],t[1]),h.stroke()}else I=!1,h.lineTo(S[0],S[1]),h.stroke(),W=null,h.globalCompositeOperation="destination-over",h.beginPath(),h.lineWidth=c,h.arc(d,d,b,0,2*Math.PI,1),h.beginPath(),h.save(),h.arc(d,d,d-3*c,0,2*Math.PI,1),h.restore(),h.clip(),h.fillStyle=r;else{if(n>=.85){if(g>f/4){var i=.01*f;g-=i}}else if(n<=.1){if(g<1.5*f){var a=.01*f;g+=a}}else{if(g<=f){var o=.01*f;g+=o}if(g>=f){var v=.01*f;g-=v}}n-E>0&&(E+=T),n-E<0&&(E-=T),C+=.07,x()}s.timer=requestAnimationFrame(y)}})}componentDidMount(){this.renderChart(),this.resize(),window.addEventListener("resize",()=>{requestAnimationFrame(()=>this.resize())},{passive:!0})}componentDidUpdate(e){var t=this.props.percent,i=()=>{clearTimeout(this.finishTimer),this.finishTimer=setTimeout(()=>{this.isFinish?this.renderChart("update"):i()},500)};e.percent!==t&&i()}componentWillUnmount(){cancelAnimationFrame(this.timer),this.node&&(this.node.innerHTML=""),window.removeEventListener("resize",this.resize)}render(){var e=this.props,t=e.height,i=e.title,a=e.percent;return o.a.createElement("div",{className:w.a.waterWave,ref:e=>this.root=e,style:{transform:`scale(${this.state.radio})`}},o.a.createElement("div",{style:{width:t,height:t,overflow:"hidden"}},o.a.createElement("canvas",{className:w.a.waterWaveCanvasWrapper,ref:e=>this.node=e,width:2*t,height:2*t})),o.a.createElement("div",{className:w.a.text,style:{width:t}},i&&o.a.createElement("span",null,i),o.a.createElement("h4",null,a,"%")))}},v=m))||v),E=C,T=i("LIIa"),W=i("NDpK");t["default"]=(()=>{var e=Object(s["useState"])(40),t=n()(e,2),i=t[0],r=t[1],h=Object(s["useContext"])(W["a"]),l=h.theme;return Object(s["useEffect"])(()=>{console.log(l,i)},[i]),o.a.createElement(T["a"],{title:"waterWave",pathtitles:["canvas","waterWave"]},o.a.createElement(E,{title:"water-wave",percent:i,height:200}),o.a.createElement("div",{style:{marginLeft:50,paddingTop:20}},"\u503c\uff1a",o.a.createElement(a["a"],{max:100,min:0,defaultValue:40,onChange:()=>r(i+1)})))})},iXxa:function(e,t,i){e.exports={waterWave:"waterWave___3L9fv",text:"text___p44Qh",waterWaveCanvasWrapper:"waterWaveCanvasWrapper___1SpJb"}}}]);